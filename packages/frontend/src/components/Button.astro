---
import { cn } from "@scout-for-lol/frontend/lib/utils.ts";

interface Props {
  href: string;
  variant?: "primary" | "secondary" | "text";
  size?: "sm" | "md" | "lg";
  color?: "indigo" | "white" | "gray";
  external?: boolean;
  class?: string;
}

const {
  href,
  variant = "primary",
  size = "md",
  color = "indigo",
  external = false,
  class: className = "",
} = Astro.props;

let variantClasses = "";
let sizeClasses = "";

// Base classes for all buttons
const baseClasses =
  "inline-flex items-center gap-2 justify-center whitespace-nowrap rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500 focus-visible:ring-offset-2";

// Map variants
switch (variant) {
  case "primary":
    if (color === "indigo") {
      variantClasses =
        "bg-indigo-600 dark:bg-indigo-600 text-white hover:bg-indigo-500 dark:hover:bg-indigo-500 focus-visible:ring-indigo-600 shadow-sm border-2 border-indigo-700 dark:border-indigo-500";
    } else if (color === "white") {
      variantClasses =
        "bg-white dark:bg-white text-indigo-600 dark:text-indigo-700 hover:bg-indigo-50 dark:hover:bg-indigo-100 focus-visible:ring-white shadow-lg border-2 border-indigo-500 dark:border-indigo-500";
    } else if (color === "gray") {
      variantClasses =
        "bg-gray-900 dark:bg-slate-600 text-white shadow-sm hover:bg-gray-700 dark:hover:bg-slate-500 focus-visible:ring-gray-900 dark:shadow-lg border-2 border-gray-700 dark:border-slate-500";
    }
    break;
  case "secondary":
    if (color === "indigo") {
      variantClasses =
        "border-2 border-indigo-600 dark:border-indigo-400 text-indigo-600 dark:text-indigo-400 hover:bg-indigo-50 dark:hover:bg-indigo-900/30";
    } else if (color === "white") {
      variantClasses = "border-2 border-white text-white hover:bg-white/10";
    } else if (color === "gray") {
      variantClasses =
        "border-2 border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white hover:bg-gray-50 dark:hover:bg-gray-800";
    }
    break;
  case "text":
    if (color === "indigo") {
      variantClasses =
        "text-indigo-600 dark:text-indigo-300 hover:text-indigo-500 dark:hover:text-indigo-200 font-semibold hover:underline";
    } else if (color === "white") {
      variantClasses =
        "text-white dark:text-indigo-100 hover:text-indigo-100 dark:hover:text-white font-semibold hover:underline";
    } else if (color === "gray") {
      variantClasses =
        "text-gray-900 dark:text-gray-200 hover:text-gray-700 dark:hover:text-gray-100 font-semibold hover:underline";
    }
    break;
}

// Map sizes
switch (size) {
  case "sm":
    sizeClasses = "h-9 px-3 text-sm";
    break;
  case "lg":
    sizeClasses = "h-11 px-8 text-base";
    break;
  case "md":
  default:
    sizeClasses = "h-10 px-4 py-2 text-sm";
    break;
}

const externalProps = external
  ? {
      target: "_blank",
      rel: "noopener noreferrer",
    }
  : {};
---

<a href={href} {...externalProps} class={cn(baseClasses, variantClasses, sizeClasses, className)}>
  <slot />
  {variant === "text" && !className.includes("inline-flex") && <span aria-hidden="true">â†’</span>}
</a>
