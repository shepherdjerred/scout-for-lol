---
import { Button as ShadcnButton } from "../components/ui/button"; // Alias for shadcn Button
import { cn } from "@scout-for-lol/frontend/lib/utils.ts";

interface Props {
  href: string;
  variant?: "primary" | "secondary" | "text";
  size?: "sm" | "md" | "lg";
  color?: "indigo" | "white" | "gray"; // Will be handled by classNames if not directly mapped by shadcn variant
  external?: boolean;
  class?: string;
}

const {
  href,
  variant = "primary",
  size = "md",
  color = "indigo",
  external = false,
  class: className = "",
} = Astro.props;

let shadcnVariant: "default" | "destructive" | "outline" | "secondary" | "ghost" | "link";
let shadcnSize: "default" | "sm" | "lg" | "icon";
let customClasses = "";

// Map variants
switch (variant) {
  case "primary":
    shadcnVariant = "default";
    if (color === "indigo") {
      customClasses +=
        " bg-indigo-600 dark:bg-indigo-600 text-white hover:bg-indigo-500 dark:hover:bg-indigo-500 focus-visible:outline-indigo-600 shadow-sm border-2 border-indigo-700 dark:border-indigo-500";
    } else if (color === "white") {
      customClasses +=
        " bg-white dark:bg-white text-indigo-600 dark:text-indigo-700 hover:bg-indigo-50 dark:hover:bg-indigo-100 focus-visible:outline-white shadow-lg border-2 border-indigo-500 dark:border-indigo-500";
    } else if (color === "gray") {
      customClasses +=
        " bg-gray-900 dark:bg-slate-600 text-white shadow-sm hover:bg-gray-700 dark:hover:bg-slate-500 focus-visible:outline-gray-900 dark:shadow-lg border-2 border-gray-700 dark:border-slate-500";
    }
    break;
  case "secondary":
    shadcnVariant = "outline"; // Or 'secondary' if we want a filled secondary
    if (color === "indigo") {
      customClasses +=
        " border-indigo-600 dark:border-indigo-400 text-indigo-600 dark:text-indigo-400 hover:bg-indigo-50 dark:hover:bg-indigo-900/30";
    } else if (color === "white") {
      customClasses += " border-white text-white hover:bg-white/10";
    } else if (color === "gray") {
      customClasses +=
        " border-gray-300 dark:border-gray-600 text-gray-900 dark:text-white hover:bg-gray-50 dark:hover:bg-gray-800";
    }
    break;
  case "text":
    shadcnVariant = "link"; // 'link' or 'ghost'
    if (color === "indigo") {
      customClasses +=
        " text-indigo-600 dark:text-indigo-300 hover:text-indigo-500 dark:hover:text-indigo-200 font-semibold";
    } else if (color === "white") {
      customClasses += " text-white dark:text-indigo-100 hover:text-indigo-100 dark:hover:text-white font-semibold";
    } else if (color === "gray") {
      customClasses += " text-gray-900 dark:text-gray-200 hover:text-gray-700 dark:hover:text-gray-100 font-semibold";
    }
    break;
  default:
    shadcnVariant = "default";
}

// Map sizes
switch (size) {
  case "sm":
    shadcnSize = "sm";
    break;
  case "lg":
    shadcnSize = "lg";
    break;
  case "md":
  default:
    shadcnSize = "default"; // shadcn 'default' is typically 'md'
    break;
}

const externalProps = external
  ? {
      target: "_blank",
      rel: "noopener noreferrer",
    }
  : {};
---

<ShadcnButton asChild variant={shadcnVariant} size={shadcnSize} className={cn(customClasses, className)}>
  <a href={href} {...externalProps} class="inline-flex items-center gap-2">
    <slot />
    {variant === "text" && !className.includes("inline-flex") && <span aria-hidden="true">â†’</span>}
  </a>
</ShadcnButton>
