---
import { Icon } from 'astro-icon/components';
import { Badge as ShadcnBadge } from '../components/ui/badge'; // Alias for shadcn Badge
import { badgeColors, type ColorVariant } from '../lib/colors';

interface Props {
  text: string;
  color?: ColorVariant;
  icon?: string; // astro-icon name
  iconHtml?: string; // Raw HTML for custom icons
  size?: 'sm' | 'md'; // Not directly mapped to shadcn, will be ignored for now
  rounded?: 'pill' | 'lg' | 'md'; // Not directly mapped to shadcn, will be ignored for now
}

const {
  text,
  color = 'indigo',
  icon,
  iconHtml,
} = Astro.props;

let shadcnVariant: 'default' | 'secondary' | 'destructive' | 'outline' = 'default';
// Map existing color variants to shadcn/ui variants as best as possible
switch (color) {
  case 'indigo':
  case 'blue':
  case 'green':
  case 'purple':
  case 'yellow':
    shadcnVariant = 'default'; // Using default for most positive colors
    break;
  case 'red':
    shadcnVariant = 'destructive';
    break;
  case 'gray':
    shadcnVariant = 'secondary';
    break;
  default:
    shadcnVariant = 'default';
}

---

<ShadcnBadge variant={shadcnVariant} className={badgeColors[color]}>
  {icon && <Icon name={icon} class="h-4 w-4 mr-1" />}
  {iconHtml && <div set:html={iconHtml} class="h-4 w-4 mr-1" />}
  {text}
</ShadcnBadge>
