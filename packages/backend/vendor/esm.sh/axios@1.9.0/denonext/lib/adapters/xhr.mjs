/* esm.sh - axios@1.9.0/lib/adapters/xhr */
var lt=Object.defineProperty;var ct=(n,t)=>{for(var r in t)lt(n,r,{get:t[r],enumerable:!0})};import at from"../../unsafe/utils.mjs";import Nt from"../../unsafe/core/settle.mjs";var F={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1};import D from"../../unsafe/utils.mjs";function w(n,t,r,e,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),e&&(this.request=e),o&&(this.response=o,this.status=o.status?o.status:null)}D.inherits(w,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:D.toJSONObject(this.config),code:this.code,status:this.status}}});var q=w.prototype,V={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{V[n]={value:n}});Object.defineProperties(w,V);Object.defineProperty(q,"isAxiosError",{value:!0});w.from=(n,t,r,e,o,i)=>{let s=Object.create(q);return D.toFlatObject(n,s,function(p){return p!==Error.prototype},l=>l!=="isAxiosError"),w.call(s,n.message,t,r,e,o),s.cause=n,s.name=n.name,i&&Object.assign(s,i),s};var m=w;import ft from"../../unsafe/utils.mjs";function J(n,t,r){m.call(this,n??"canceled",m.ERR_CANCELED,t,r),this.name="CanceledError"}ft.inherits(J,m,{__CANCEL__:!0});var K=J;function U(n){let t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return t&&t[1]||""}import mt from"node:crypto";import dt from"node:url";var W=dt.URLSearchParams;import pt from"/form-data@^4.0.0?target=denonext";var G=pt;var L="abcdefghijklmnopqrstuvwxyz",X="0123456789",$={DIGIT:X,ALPHA:L,ALPHA_DIGIT:L+L.toUpperCase()+X},ht=(n=16,t=$.ALPHA_DIGIT)=>{let r="",{length:e}=t,o=new Uint32Array(n);mt.randomFillSync(o);for(let i=0;i<n;i++)r+=t[o[i]%e];return r},Q={isNode:!0,classes:{URLSearchParams:W,FormData:G,Blob:typeof Blob<"u"&&Blob||null},ALPHABET:$,generateString:ht,protocols:["http","https","file","data"]};var j={};ct(j,{hasBrowserEnv:()=>_,hasStandardBrowserEnv:()=>Et,hasStandardBrowserWebWorkerEnv:()=>gt,navigator:()=>P,origin:()=>yt});var _=typeof globalThis<"u"&&typeof document<"u",P=typeof navigator=="object"&&navigator||void 0,Et=_&&(!P||["ReactNative","NativeScript","NS"].indexOf(P.product)<0),gt=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",yt=_&&globalThis.location.href||"http://localhost";var h={...j,...Q};import d from"../../unsafe/utils.mjs";import bt from"../../unsafe/utils.mjs";var Rt=bt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Y=n=>{let t={},r,e,o;return n&&n.split(`
`).forEach(function(s){o=s.indexOf(":"),r=s.substring(0,o).trim().toLowerCase(),e=s.substring(o+1).trim(),!(!r||t[r]&&Rt[r])&&(r==="set-cookie"?t[r]?t[r].push(e):t[r]=[e]:t[r]=t[r]?t[r]+", "+e:e)}),t};var Z=Symbol("internals");function S(n){return n&&String(n).trim().toLowerCase()}function O(n){return n===!1||n==null?n:d.isArray(n)?n.map(O):String(n)}function wt(n){let t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g,e;for(;e=r.exec(n);)t[e[1]]=e[2];return t}var xt=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function H(n,t,r,e,o){if(d.isFunction(e))return e.call(this,t,r);if(o&&(t=r),!!d.isString(t)){if(d.isString(e))return t.indexOf(e)!==-1;if(d.isRegExp(e))return e.test(t)}}function Tt(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,e)=>r.toUpperCase()+e)}function At(n,t){let r=d.toCamelCase(" "+t);["get","set","has"].forEach(e=>{Object.defineProperty(n,e+r,{value:function(o,i,s){return this[e].call(this,t,o,i,s)},configurable:!0})})}var x=class{constructor(t){t&&this.set(t)}set(t,r,e){let o=this;function i(l,p,u){let a=S(p);if(!a)throw new Error("header name must be a non-empty string");let f=d.findKey(o,a);(!f||o[f]===void 0||u===!0||u===void 0&&o[f]!==!1)&&(o[f||p]=O(l))}let s=(l,p)=>d.forEach(l,(u,a)=>i(u,a,p));if(d.isPlainObject(t)||t instanceof this.constructor)s(t,r);else if(d.isString(t)&&(t=t.trim())&&!xt(t))s(Y(t),r);else if(d.isObject(t)&&d.isIterable(t)){let l={},p,u;for(let a of t){if(!d.isArray(a))throw TypeError("Object iterator must return a key-value pair");l[u=a[0]]=(p=l[u])?d.isArray(p)?[...p,a[1]]:[p,a[1]]:a[1]}s(l,r)}else t!=null&&i(r,t,e);return this}get(t,r){if(t=S(t),t){let e=d.findKey(this,t);if(e){let o=this[e];if(!r)return o;if(r===!0)return wt(o);if(d.isFunction(r))return r.call(this,o,e);if(d.isRegExp(r))return r.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=S(t),t){let e=d.findKey(this,t);return!!(e&&this[e]!==void 0&&(!r||H(this,this[e],e,r)))}return!1}delete(t,r){let e=this,o=!1;function i(s){if(s=S(s),s){let l=d.findKey(e,s);l&&(!r||H(e,e[l],l,r))&&(delete e[l],o=!0)}}return d.isArray(t)?t.forEach(i):i(t),o}clear(t){let r=Object.keys(this),e=r.length,o=!1;for(;e--;){let i=r[e];(!t||H(this,this[i],i,t,!0))&&(delete this[i],o=!0)}return o}normalize(t){let r=this,e={};return d.forEach(this,(o,i)=>{let s=d.findKey(e,i);if(s){r[s]=O(o),delete r[i];return}let l=t?Tt(i):String(i).trim();l!==i&&delete r[i],r[l]=O(o),e[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){let r=Object.create(null);return d.forEach(this,(e,o)=>{e!=null&&e!==!1&&(r[o]=t&&d.isArray(e)?e.join(", "):e)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){let e=new this(t);return r.forEach(o=>e.set(o)),e}static accessor(t){let e=(this[Z]=this[Z]={accessors:{}}).accessors,o=this.prototype;function i(s){let l=S(s);e[l]||(At(o,s),e[l]=!0)}return d.isArray(t)?t.forEach(i):i(t),this}};x.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);d.reduceDescriptors(x.prototype,({value:n},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}});d.freezeMethods(x);var R=x;function St(n,t){n=n||10;let r=new Array(n),e=new Array(n),o=0,i=0,s;return t=t!==void 0?t:1e3,function(p){let u=Date.now(),a=e[i];s||(s=u),r[o]=p,e[o]=u;let f=i,E=0;for(;f!==o;)E+=r[f++],f=f%n;if(o=(o+1)%n,o===i&&(i=(i+1)%n),u-s<t)return;let b=a&&u-a;return b?Math.round(E*1e3/b):void 0}}var tt=St;function Ot(n,t){let r=0,e=1e3/t,o,i,s=(u,a=Date.now())=>{r=a,o=null,i&&(clearTimeout(i),i=null),n.apply(null,u)};return[(...u)=>{let a=Date.now(),f=a-r;f>=e?s(u,a):(o=u,i||(i=setTimeout(()=>{i=null,s(o)},e-f)))},()=>o&&s(o)]}var et=Ot;var B=(n,t,r=3)=>{let e=0,o=tt(50,250);return et(i=>{let s=i.loaded,l=i.lengthComputable?i.total:void 0,p=s-e,u=o(p),a=s<=l;e=s;let f={loaded:s,total:l,progress:l?s/l:void 0,bytes:p,rate:u||void 0,estimated:u&&l&&a?(l-s)/u:void 0,event:i,lengthComputable:l!=null,[t?"download":"upload"]:!0};n(f)},r)};import st from"../../unsafe/utils.mjs";var rt=h.hasStandardBrowserEnv?((n,t)=>r=>(r=new URL(r,h.origin),n.protocol===r.protocol&&n.host===r.host&&(t||n.port===r.port)))(new URL(h.origin),h.navigator&&/(msie|trident)/i.test(h.navigator.userAgent)):()=>!0;import v from"../../unsafe/utils.mjs";var ot=h.hasStandardBrowserEnv?{write(n,t,r,e,o,i){let s=[n+"="+encodeURIComponent(t)];v.isNumber(r)&&s.push("expires="+new Date(r).toGMTString()),v.isString(e)&&s.push("path="+e),v.isString(o)&&s.push("domain="+o),i===!0&&s.push("secure"),document.cookie=s.join("; ")},read(n){let t=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};import kt from"../../unsafe/core/buildFullPath.mjs";import g from"../../unsafe/utils.mjs";var nt=n=>n instanceof R?{...n}:n;function I(n,t){t=t||{};let r={};function e(u,a,f,E){return g.isPlainObject(u)&&g.isPlainObject(a)?g.merge.call({caseless:E},u,a):g.isPlainObject(a)?g.merge({},a):g.isArray(a)?a.slice():a}function o(u,a,f,E){if(g.isUndefined(a)){if(!g.isUndefined(u))return e(void 0,u,f,E)}else return e(u,a,f,E)}function i(u,a){if(!g.isUndefined(a))return e(void 0,a)}function s(u,a){if(g.isUndefined(a)){if(!g.isUndefined(u))return e(void 0,u)}else return e(void 0,a)}function l(u,a,f){if(f in t)return e(u,a);if(f in n)return e(void 0,u)}let p={url:i,method:i,data:i,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:l,headers:(u,a,f)=>o(nt(u),nt(a),f,!0)};return g.forEach(Object.keys(Object.assign({},n,t)),function(a){let f=p[a]||o,E=f(n[a],t[a],a);g.isUndefined(E)&&f!==l||(r[a]=E)}),r}import Ct from"../../unsafe/helpers/buildURL.mjs";var it=n=>{let t=I({},n),{data:r,withXSRFToken:e,xsrfHeaderName:o,xsrfCookieName:i,headers:s,auth:l}=t;t.headers=s=R.from(s),t.url=Ct(kt(t.baseURL,t.url,t.allowAbsoluteUrls),n.params,n.paramsSerializer),l&&s.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let p;if(st.isFormData(r)){if(h.hasStandardBrowserEnv||h.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if((p=s.getContentType())!==!1){let[u,...a]=p?p.split(";").map(f=>f.trim()).filter(Boolean):[];s.setContentType([u||"multipart/form-data",...a].join("; "))}}if(h.hasStandardBrowserEnv&&(e&&st.isFunction(e)&&(e=e(t)),e||e!==!1&&rt(t.url))){let u=o&&i&&ot.read(i);u&&s.set(o,u)}return t};var Dt=typeof XMLHttpRequest<"u",Le=Dt&&function(n){return new Promise(function(r,e){let o=it(n),i=o.data,s=R.from(o.headers).normalize(),{responseType:l,onUploadProgress:p,onDownloadProgress:u}=o,a,f,E,b,k;function z(){b&&b(),k&&k(),o.cancelToken&&o.cancelToken.unsubscribe(a),o.signal&&o.signal.removeEventListener("abort",a)}let c=new XMLHttpRequest;c.open(o.method.toUpperCase(),o.url,!0),c.timeout=o.timeout;function M(){if(!c)return;let y=R.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders()),A={data:!l||l==="text"||l==="json"?c.responseText:c.response,status:c.status,statusText:c.statusText,headers:y,config:n,request:c};Nt(function(N){r(N),z()},function(N){e(N),z()},A),c=null}"onloadend"in c?c.onloadend=M:c.onreadystatechange=function(){!c||c.readyState!==4||c.status===0&&!(c.responseURL&&c.responseURL.indexOf("file:")===0)||setTimeout(M)},c.onabort=function(){c&&(e(new m("Request aborted",m.ECONNABORTED,n,c)),c=null)},c.onerror=function(){e(new m("Network Error",m.ERR_NETWORK,n,c)),c=null},c.ontimeout=function(){let T=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded",A=o.transitional||F;o.timeoutErrorMessage&&(T=o.timeoutErrorMessage),e(new m(T,A.clarifyTimeoutError?m.ETIMEDOUT:m.ECONNABORTED,n,c)),c=null},i===void 0&&s.setContentType(null),"setRequestHeader"in c&&at.forEach(s.toJSON(),function(T,A){c.setRequestHeader(A,T)}),at.isUndefined(o.withCredentials)||(c.withCredentials=!!o.withCredentials),l&&l!=="json"&&(c.responseType=o.responseType),u&&([E,k]=B(u,!0),c.addEventListener("progress",E)),p&&c.upload&&([f,b]=B(p),c.upload.addEventListener("progress",f),c.upload.addEventListener("loadend",b)),(o.cancelToken||o.signal)&&(a=y=>{c&&(e(!y||y.type?new K(null,n,c):y),c.abort(),c=null)},o.cancelToken&&o.cancelToken.subscribe(a),o.signal&&(o.signal.aborted?a():o.signal.addEventListener("abort",a)));let C=U(o.url);if(C&&h.protocols.indexOf(C)===-1){e(new m("Unsupported protocol "+C+":",m.ERR_BAD_REQUEST,n));return}c.send(i||null)})};export{Le as default};

import "https://deno.land/x/xhr@0.3.0/mod.ts";//# sourceMappingURL=xhr.mjs.map